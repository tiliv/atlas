---
---
<!doctype html>
<html lang="en">
<head>
  <title>{{ site.title | default: page.title }}</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    worker-src blob:;
    connect-src 'self' https://unpkg.com https://demotiles.maplibre.org;
    img-src 'self' data: https://img.shields.io;
    script-src 'self' 'unsafe-inline' https://unpkg.com;
    style-src 'self' 'unsafe-inline' https://unpkg.com;
    font-src 'self' https://antibody.discoverywritten.com;
  ">
  <link rel="stylesheet" href="/site.css">
  <link rel="stylesheet" href="/content.css">
  <link rel="stylesheet" href="/map.css">
  <link rel="stylesheet" href="/projects.css">
  <script src="/preferences.js"></script>
  <script nonce="__init__">
    const preferences = PREFERENCES("{{ page.preferences }}"); // Scoped localStorage proxy
    const prefer = {{ site.preferences | jsonify }};  // Defaults, updates cache in this object
    const use = Object.fromEntries( // Map of setters, use these
      Object.keys(prefer).map((k) => {
        prefer[k] = preferences.retain(k, prefer[k], { force: false });  // init
        return [k, on => prefer[k] = preferences.use(k)(on)];  // call
      }));
  </script>
</head>
<body>
  <div id="title-stack" class="brand" role="banner" aria-label="Project title">
    <a href="/" style="display: flex; justify-content: center;">
    <h1 id="title-stroke" inert>{{ site.title }}</h1>
    <h1 id="title" aria-describe="Title:">{{ site.title }}</h1>
    </a>
  </div>
  <p id="replication">
    {{ site.civic_node }} Civic Node
    <br>{{ site.civic_tag }}
    <br><a href="{{ site.license_url }}" target="_blank">
      <img
        style="width: auto"
        src="{{ site.license_badge }}"
      />
    </a>
  </p>
  <div id="map"></div>
  <main class="styled">
  </main>
  <div id="footer">
    <form class="map-controls">
      {% for kv in site.data.map.atlas %}
      {%- assign source = kv[0] -%}
      {%- assign layer = kv[1] -%}
      <label for="toggle-{{ source }}" style="
        background-color: {{ layer.paint['fill-color'] }};
        color: {{ layer.paint['line-color'] }};
      ">
        <input type="checkbox" checked id="toggle-{{ source }}" name="{{ source }}-{{ layer.type }}" />
        {{ layer.file | split:"_" | first | capitalize }}
      </label>
      {% endfor %}
    </form>
    <div style="margin: auto"></div>
    <form class="map-controls">
      {% for kv in site.data.map.osm %}
      {%- assign source = kv[0] -%}
      {%- assign layer = kv[1] -%}
      <label for="toggle-{{ source }}" style="
        background-color: {{ layer.paint['fill-color'] }};
        color: {{ layer.paint['line-color'] }};
      ">
        <input type="checkbox" checked id="toggle-{{ source }}" name="{{ source }}-{{ layer.type }}" />
        {{ layer.file | split:"_" | first | capitalize }}
      </label>
      {% endfor %}
    </form>
    <span>Mapping &copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors</span>
  </div>
  {% include map.html %}
</body>
</html>
